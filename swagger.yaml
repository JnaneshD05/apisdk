openapi: 3.0.0
x-stoplight:
  id: bo06ruwlofb49
info:
  title: Azure V4 API
  version: '1.0'
tags:
  - name: Cosmos
    description: List of APIs related to Cosmos DB onboarding
  - name: Maria
    description: List of APIs related to the Maria DB onboarding
  - name: MySQL
    description: List of APIs related to the MySQL DB onboarding
  - name: PostgreSQL
    description: List of APIs related to the PostgreSQL DB Onboarding
  - name: MSSQL
    description: List of APIs related to the MSSQL DB Onboarding
servers:
  - url: /webconsole/api
paths:
  /V4/AzureDB/Regions:
    get:
      summary: Get Azure Regions
      tags:
        - Cosmos
        - Maria
        - MySQL
        - PostgreSQL
        - MSSQL
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IdName'
              examples:
                example-1:
                  value:
                    regions:
                      - id: 7
                        name: centralus
                      - id: 8
                        name: eastus2
                      - id: 9
                        name: eastus
                      - id: 10
                        name: northcentralus
                      - id: 11
                        name: southcentralus
                      - id: 12
                        name: westus2
                      - id: 13
                        name: westcentralus
                      - id: 14
                        name: westus
                      - id: 21
                        name: canadacentral
                      - id: 22
                        name: canadaeast
                      - id: 23
                        name: brazilsouth
                      - id: 24
                        name: northeurope
                      - id: 25
                        name: westeurope
                      - id: 26
                        name: francecentral
                      - id: 27
                        name: francesouth
                      - id: 28
                        name: uksouth
                      - id: 29
                        name: ukwest
                      - id: 30
                        name: Germany Central
                      - id: 31
                        name: Germany Northeast
                      - id: 32
                        name: eastasia
                      - id: 33
                        name: southeastasia
                      - id: 34
                        name: australiacentral
                      - id: 35
                        name: australiacentral2
                      - id: 36
                        name: australiaeast
                      - id: 37
                        name: australiasoutheast
                      - id: 42
                        name: centralindia
                      - id: 43
                        name: southindia
                      - id: 44
                        name: westindia
                      - id: 45
                        name: japaneast
                      - id: 46
                        name: japanwest
                      - id: 47
                        name: koreacentral
                      - id: 48
                        name: koreasouth
                      - id: 67
                        name: Germany West Central(Public)
                      - id: 68
                        name: Germany West Central (Public)
                      - id: 69
                        name: germanywestcentral
                      - id: 70
                        name: southafricanorth
                      - id: 71
                        name: switzerlandnorth
                      - id: 74
                        name: uaenorth
                      - id: 84
                        name: westus3
                      - id: 85
                        name: centralusstage
                      - id: 86
                        name: westusstage
                      - id: 87
                        name: westus2stage
                      - id: 88
                        name: eastusstage
                      - id: 89
                        name: eastus2stage
                      - id: 90
                        name: northcentralusstage
                      - id: 91
                        name: southcentralusstage
                      - id: 92
                        name: centraluseuap
                      - id: 93
                        name: eastus2euap
                      - id: 94
                        name: unitedstateseuap
                      - id: 95
                        name: brazilsoutheast
                      - id: 96
                        name: swedencentral
                      - id: 98
                        name: norwayeast
                      - id: 100
                        name: germanynorth
                      - id: 101
                        name: norwaywest
                      - id: 102
                        name: switzerlandwest
                      - id: 104
                        name: uaecentral
                      - id: 105
                        name: jioindiacentral
                      - id: 106
                        name: jioindiawest
                      - id: 107
                        name: eastasiastage
                      - id: 108
                        name: southeastasiastage
                      - id: 109
                        name: southafricawest
                      - id: 111
                        name: asia
                      - id: 112
                        name: asiapacific
                      - id: 113
                        name: australia
                      - id: 114
                        name: brazil
                      - id: 115
                        name: canada
                      - id: 116
                        name: europe
                      - id: 117
                        name: france
                      - id: 118
                        name: germany
                      - id: 119
                        name: global
                      - id: 120
                        name: india
                      - id: 121
                        name: japan
                      - id: 122
                        name: korea
                      - id: 123
                        name: norway
                      - id: 124
                        name: southafrica
                      - id: 125
                        name: switzerland
                      - id: 126
                        name: uae
                      - id: 127
                        name: uk
                      - id: 128
                        name: unitedstates
                      - id: 160
                        name: Germany West Central
                      - id: 161
                        name: South Africa North
                      - id: 162
                        name: Switzerland North
                      - id: 163
                        name: UAE North
      operationId: get-V4-Metallic-Azure-Regions
      description: Get the list of regions (Azure)
    parameters: []
  /V4/AzureDB/BackupGateway:
    get:
      summary: Get backup gateways azure DB
      tags:
        - Cosmos
        - Maria
        - MySQL
        - PostgreSQL
        - MSSQL
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/getbackupgateways'
              examples:
                example-1:
                  value:
                    backupGateways:
                      - id: 1857
                        name: Backupgateway-e4c581a8-f98a-49fa-8766-793163f5b790
                example-2:
                  value:
                    backupGateways:
                      - id: 2053
                        name: az-m035test-93d4172b-133d-4f28-a486-aea16b6c2f83
                      - id: 1860
                        name: azmetallic3-d2f53950-9716-48f0-91b7-88e8ab591040
                      - id: 1898
                        name: azmetallic5-MI-790422ef-cd2c-44a9-aaf6-c8a7b93ab941
                      - id: 1935
                        name: SQLEastUS-SSMS-2e5fcf76-ab51-415d-8b45-b4460a2ee142
                      - id: 1912
                        name: SQLVMEastUS-59bf9cc7-a0c1-4ae0-a7de-3357598cdf1b
      operationId: get-V4-Metallic-Azure-CosmosDB-BackupGateways
      parameters:
        - schema:
            type: integer
          in: query
          name: regionId
          description: Region Id
      description: Get backup gateways azure Cosmos DB
    parameters: []
  /V4/AzureDB/Storage/Azure/Credentials:
    get:
      summary: Get Credentials for microsoft azure
      tags:
        - Cosmos
        - Maria
        - MySQL
        - PostgreSQL
        - MSSQL
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/getCredentials'
              examples:
                example-1:
                  value:
                    credentialManager:
                      - id: 332
                        name: TestM
                        accountType: CLOUD_ACCOUNT
                        vendorType: MICROSOFT_AZURE_TYPE
                        authType: MICROSOFT_AZURE
                      - id: 344
                        name: azure-storage-ash
                        accountType: CLOUD_ACCOUNT
                        vendorType: MICROSOFT_AZURE_TYPE
                        authType: MICROSOFT_AZURE
                      - id: 350
                        name: testCred
                        accountType: CLOUD_ACCOUNT
                        vendorType: MICROSOFT_AZURE_TYPE
                        authType: MICROSOFT_AZURE
                      - id: 376
                        name: testcredential
                        accountType: CLOUD_ACCOUNT
                        vendorType: MICROSOFT_AZURE_TYPE
                        authType: MICROSOFT_AZURE
      operationId: get-V4-Metallic-Azure-Credentials
      description: |
        Get the credentials for microsoft azure
    parameters: []
    post:
      summary: Create azure storage credentials
      operationId: post-V4-AzureDB-Storage-Azure-Credentials
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties: {}
              examples:
                example-1:
                  value:
                    credential:
                      id: 442
                    errorMessage: Successful!
                    errorCode: 0
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties: {}
              examples:
                example-1:
                  value:
                    errorMessage: 'Credential account [testcrednt] already exists. Use other credentials.'
                    errorCode: 587206339
      description: API to create the storage credentials for Azure Storage
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/createStorageCredential'
            examples:
              example-1:
                value:
                  name: testcredentials
                  accountName: sa
                  accesskey: Q29tbXZhdWx0ITEy
                  description: test
              Credential already exists:
                value:
                  name: testcrednt
                  accountName: sa
                  accesskey: Q29tbXZhdWx0ITEy
                  description: test
        description: 'Json request body which contains name and storageAccountName, accessKey and description as the inputs'
  /V4/AzureDB/Storage:
    get:
      summary: GET Azure Storage - Cloud storage location
      tags:
        - Cosmos
        - Maria
        - MSSQL
        - PostgreSQL
        - MSSQL
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/getStoragePoolListresp'
              examples:
                example-1:
                  value:
                    cloudStorage:
                      - id: 1899
                        name: CVMetallic-AzureDB1-Cloud storage
                        storagePoolType: DEDUPLICATION
                        status: Online
                      - id: 2103
                        name: CVMetallic-AzureDB1-Cloud storage teststorage7
                        storagePoolType: DEDUPLICATION
                        status: Online
                      - id: 2076
                        name: CVMetallic-AzureDB1-Clouds storage
                        storagePoolType: DEDUPLICATION
                        status: Online
                      - id: 2043
                        name: cvmetallic-azuredb1-server2-eastus
                        storagePoolType: DEDUPLICATION
                        status: Online
                      - id: 1901
                        name: cvmetallic-azuredb1-server-eastus
                        storagePoolType: DEDUPLICATION
                        status: Online
                      - id: 2025
                        name: MAS-BYOS-2
                        storagePoolType: DEDUPLICATION
                        status: Online
                      - id: 1903
                        name: MAS-DB-Storage
                        storagePoolType: DEDUPLICATION
                        status: Online
      operationId: get-V4-Metallic-CloudStorageLocation
      description: List of all the cloud storage locations
      parameters:
        - schema:
            type: integer
          in: query
          name: regionId
          description: Region Id
    parameters: []
    post:
      summary: Create cloud storage
      tags:
        - Cosmos
        - Maria
        - PostgreSQL
        - MSSQL
      operationId: post-V4-MetallicAzureDB-Storage
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IdName'
              examples:
                Create storage pool of type MRR_COOl:
                  value:
                    id: 1897
                    name: cvmetallic-azuredb1-server-eastus2
                'Create storage pool of Azure type ':
                  value:
                    id: 2102
                    name: CVMetallic-AzureDB1-Cloud storage teststorage
                Create storage pool of Azure type with backupGateways in payload:
                  value:
                    id: 2103
                    name: CVMetallic-AzureDB1-Cloud storage teststorage7
                When name is passed for the metallic type storage- Input name will be ignored:
                  value:
                    id: 1909
                    name: cvmetallic-azuredb1-server2-eastus2
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                x-examples:
                  example-1:
                    failedStage: PostStoragePool1
                    errorCode: -1
                    errorMessage: null
                properties:
                  failedStage:
                    type: string
                  errorCode:
                    type: integer
                  errorMessage:
                    oneOf:
                      - type: string
                      - type: object
                        properties:
                          errorMessage:
                            type: string
                          errorCode:
                            type: string
              examples:
                Storage pool already exists:
                  value:
                    failedStage: PostStoragePool1
                    errorCode: -1
                    errorMessage:
                      errorMessage: 'Library [CVMetallic-AzureDB1-Cloud storage] already exists. Please enter unique library name.'
                      errorCode: '1'
                Invalid type in payload:
                  value:
                    failedStage: string
                    errorCode: 0
                    errorMessage: 'null'
                When backup gateway is unreachable:
                  value:
                    failedStage: PostStoragePool
                    errorCode: -1
                    errorMessage:
                      errorMessage: 'Failed to verify the device from MediaAgent [azmetallic5-MI-790422ef-cd2c-44a9-aaf6-c8a7b93ab941] with the error [Communication with MediaAgent[azmetallic5-MI] failed. Please check that this product''s services on MediaAgent are up[azmetallic5-MI].].'
                      errorCode: '1'
      description: Create storage pool
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/createStoragePool'
            examples:
              Create storage pool of type MRR_COOl:
                value:
                  type: Metallic
                  region:
                    id: 9
                  storageClass: MRR_COOL
              'Create storage pool of Azure type ':
                value:
                  type: Azure
                  name: CVMetallic-AzureDB1-Cloud storage teststorage
                  region:
                    id: 8
                  credential:
                    id: 350
                  container: somecontanier
              Create storage pool of Azure type with backupGateways in payload:
                value:
                  type: Azure
                  name: CVMetallic-AzureDB1-Cloud storage teststorage7
                  region:
                    id: 9
                    name: eastus
                  credential:
                    id: 350
                  container: somecontanier
                  backupGateways:
                    - id: 1898
                      name: azmetallic5-MI-790422ef-cd2c-44a9-aaf6-c8a7b93ab941
              Storage Pool Already exist:
                value:
                  type: Azure
                  name: CVMetallic-AzureDB1-Cloud storage
                  region:
                    id: 9
                  credential:
                    id: 350
                  container: somecontanier
              'When name is passed for the metallic type storage ':
                value:
                  type: Metallic
                  storageClass: MRR_COOL
                  name: CVMetallic test metallic MRR storage
                  region:
                    Id: 8
              When backupgateway is unreachable:
                value:
                  type: Azure
                  name: Azure test storage
                  region:
                    id: 9
                  credential:
                    id: 350
                  backupGateways:
                    - id: 1898
                      name: azmetallic5-MI-790422ef-cd2c-44a9-aaf6-c8a7b93ab941
                  container: test container
        description: ''
  /V4/AzureDB/Plans:
    get:
      summary: Get eligible Plans
      tags:
        - Cosmos
        - Maria
        - PostgreSQL
        - MSSQL
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/getPlansResp'
              examples:
                example-1:
                  value:
                    plans:
                      - id: 1638
                        name: MAS-DB-custom-2d
                        summary:
                          RPOHours: '48'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '13'
                      - id: 1624
                        name: MAS-DB-Plan
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '21'
                      - id: 1649
                        name: testm8
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '0'
      operationId: get-V4-AzureDB-Plans
      parameters:
        - schema:
            type: integer
          in: query
          name: cloudStorageId
          description: Storage pool Id
          required: true
  /V4/AzureDB/CloudAccount/Credentials:
    get:
      summary: GET Saved credentials
      tags:
        - Cosmos
        - Maria
        - MySQL
        - PostgreSQL
        - MSSQL
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/getCredentials'
              examples:
                example-1:
                  value:
                    credentialManager:
                      - id: 324
                        name: azure-cred
                        accountType: CLOUD_ACCOUNT
                        vendorType: MICROSOFT_AZURE_TYPE
                        authType: AZUREACCOUNT
                      - id: 326
                        name: AzureSQLCreds
                        accountType: CLOUD_ACCOUNT
                        vendorType: MICROSOFT_AZURE_TYPE
                        authType: AZUREACCOUNT
                      - id: 327
                        name: CosmosCredreg
                        accountType: CLOUD_ACCOUNT
                        vendorType: MICROSOFT_AZURE_TYPE
                        authType: AZUREACCOUNT
                      - id: 332
                        name: TestM
                        accountType: CLOUD_ACCOUNT
                        vendorType: MICROSOFT_AZURE_TYPE
                        authType: MICROSOFT_AZURE
                      - id: 333
                        name: AzureSQLTeam-SQLRMApp1
                        accountType: CLOUD_ACCOUNT
                        vendorType: MICROSOFT_AZURE_TYPE
                        authType: AZUREACCOUNT
                      - id: 334
                        name: dummy-donot-use
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 335
                        name: AZMangInstRegul
                        accountType: CLOUD_ACCOUNT
                        vendorType: MICROSOFT_AZURE_TYPE
                        authType: AZUREACCOUNT
                      - id: 336
                        name: AzureSQLServer-Chris
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 337
                        name: MangedinstanceRegular
                        accountType: CLOUD_ACCOUNT
                        vendorType: MICROSOFT_AZURE_TYPE
                        authType: AZUREACCOUNT
                      - id: 338
                        name: AzureSQLServer-cvadmin
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 339
                        name: SQLServer-peter
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 341
                        name: azure-CA-Page
                        accountType: CLOUD_ACCOUNT
                        vendorType: MICROSOFT_AZURE_TYPE
                        authType: AZUREACCOUNT
                      - id: 344
                        name: azure-storage-ash
                        accountType: CLOUD_ACCOUNT
                        vendorType: MICROSOFT_AZURE_TYPE
                        authType: MICROSOFT_AZURE
                      - id: 345
                        name: AzureSQLServer-AD-NonMFA
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 346
                        name: AzureSQLServer-cvadmin2
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 347
                        name: Mainstadmin
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 350
                        name: testCred
                        accountType: CLOUD_ACCOUNT
                        vendorType: MICROSOFT_AZURE_TYPE
                        authType: MICROSOFT_AZURE
                      - id: 352
                        name: dummy
                        accountType: CLOUD_ACCOUNT
                        vendorType: MICROSOFT_AZURE_TYPE
                        authType: AZUREACCOUNT
                      - id: 353
                        name: SQLMIEastUSadmin
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 354
                        name: SQLMIEaUSadm2
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 357
                        name: AzureSQLServer-sqladmin
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 359
                        name: ManInstApp
                        accountType: CLOUD_ACCOUNT
                        vendorType: MICROSOFT_AZURE_TYPE
                        authType: AZUREACCOUNT
                      - id: 360
                        name: ManEaUSsqladmin
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 361
                        name: ManInstsqladmin
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 362
                        name: sqladminwestus
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 363
                        name: vsardscreds
                        accountType: CLOUD_ACCOUNT
                        vendorType: AMAZON
                        authType: AMAZON_S3
                      - id: 364
                        name: awscreds-aash
                        accountType: CLOUD_ACCOUNT
                        vendorType: AMAZON
                        authType: AMAZON_S3
                      - id: 365
                        name: 0708MaIdsqladmin
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 372
                        name: sheza-testVSA-azure
                        accountType: CLOUD_ACCOUNT
                        vendorType: MICROSOFT_AZURE_TYPE
                        authType: AZUREACCOUNT
                      - id: 376
                        name: testcredential
                        accountType: CLOUD_ACCOUNT
                        vendorType: MICROSOFT_AZURE_TYPE
                        authType: MICROSOFT_AZURE
      operationId: get-V4-Metallic-Azure-SavedCredentials
      description: Get saved credentials for cloud account
    parameters: []
    post:
      summary: Create Cloud Account credentials
      operationId: post-V4-AzureDB-CloudAccount-Credentials
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties: {}
              examples:
                example-1:
                  value:
                    credential:
                      id: 443
                    errorMessage: Successful!
                    errorCode: 0
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties: {}
              examples:
                Credential account name already exists:
                  value:
                    errorMessage: 'Credential account [testcloudaccountcred] already exists. Use other credentials.'
                    errorCode: 587206339
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/createCloudAccountCreds'
            examples:
              example-1:
                value:
                  name: test
                  tenantId: testid
                  applicationId: testappid
                  applicationSecret: Q29tbXZhdWx0ITEy
                  description: test creds with no meaning
              Credential account name already exists:
                value:
                  name: testcloudaccountcred
                  tenantId: id
                  applicationId: id
                  applicationSecret: Q29tbXZhdWx0ITEy
                  description: test creds with no meaning
          application/xml:
            schema:
              $ref: '#/components/schemas/createCloudAccountCreds'
            examples:
              example-1:
                value:
                  name: string
                  tenantId: string
                  applicationId: string
                  applicationSecret: string
                  description: string
          multipart/form-data:
            schema:
              type: object
              properties: {}
          text/html:
            schema:
              type: object
              properties: {}
          text/plain:
            schema:
              type: object
              properties: {}
          application/EDI-X12:
            schema:
              type: object
              properties: {}
          application/EDIFACT:
            schema:
              type: object
              properties: {}
  /V4/AzureDB/CloudAccount:
    post:
      summary: Create New Cloud Account
      operationId: post-user
      tags:
        - Cosmos
        - Maria
        - MySQL
        - PostgreSQL
        - MSSQL
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IdName'
              examples:
                Create cloud Account with backup gateway:
                  value:
                    id: 2015
                    name: new_cloudaccount_test6
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                type: object
                properties:
                  failedStage:
                    type: string
                  errorCode:
                    type: integer
                  errorMessage:
                    type: object
                    properties:
                      errorMessage:
                        type: string
                      errorCode:
                        type: string
                x-examples:
                  example-1:
                    failedStage: PostClient
                    errorCode: -1
                    errorMessage:
                      errorMessage: Validate VS credentials failed. Provided credentials are invalid.
                      errorCode: '100'
              examples:
                Invalid subscriptionID:
                  value:
                    failedStage: PostClient
                    errorCode: -1
                    errorMessage:
                      errorMessage: Validate VS credentials failed. Provided credentials are invalid.
                      errorCode: '100'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                type: object
                properties:
                  failedStage:
                    type: string
                  errorCode:
                    type: integer
                  errorMessage:
                    type: object
                    properties:
                      errorMessage:
                        type: string
                      errorCode:
                        type: string
                x-examples:
                  example-1:
                    failedStage: PostClient
                    errorCode: -1
                    errorMessage:
                      errorMessage: Validate VS credentials failed. Provided credentials are invalid.
                      errorCode: '100'
              examples:
                Cloud Account name already exists:
                  value:
                    failedStage: PostClient
                    errorCode: -1
                    errorMessage:
                      errorMessage: 'Duplicate entry.Client [new_cloudaccount_cosmos] already exists. Try with different Client name.'
                      errorCode: '3'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties: {}
              examples:
                Invalid backup gateway in the input:
                  value:
                    failedStage: PostClient
                    errorCode: -1
                    errorMessage:
                      errorMessage: Validate VS credentials failed. Unexpected response is received.
                      errorCode: '105'
      description: Create a new user.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/createCloudAccount'
            examples:
              Create cloud Account with backup gateway:
                value:
                  name: new_cloudaccount_test6
                  subscriptionId: 2c21f3cf-d49e-43c1-a19b-16b9886f4b25
                  region:
                    id: 9
                  backupGateways:
                    - id: 1898
                      name: azmetallic5-MI-790422ef-cd2c-44a9-aaf6-c8a7b93ab941
              Invalid subscription ID:
                value:
                  name: new_cloudaccount_cosmos
                  subscriptionId: invalid subscriptionId
                  region:
                    id: 9
                  backupGateways:
                    - id: 1935
                      name: SQLEastUS-SSMS-xxxxx
              Cloud Account name already exists:
                value:
                  name: new_cloudaccount_test6
                  subscriptionId: 2c21f3cf-d49e-43c1-a19b-16b9886f4b25
                  region:
                    id: 9
                  backupGateways:
                    - id: 1898
                      name: azmetallic5-MI-790422ef-cd2c-44a9-aaf6-c8a7b93ab941
              Invalid backupgateway name specified:
                value:
                  name: entity_testaccount
                  subscriptionId: 2c21f3cf-d49e-43c1-a19b-16b9886f4b25
                  region:
                    id: 9
                  backupGateways:
                    - id: 1898
                      name: azmetallic5...
        description: ''
    parameters: []
    get:
      summary: ''
      operationId: get-V4-AzureDB-CloudAccount
      tags:
        - Cosmos
        - Maria
        - MySQL
        - PostgreSQL
        - MSSQL
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/getCloudAppsList'
              examples:
                example-1:
                  value:
                    cloudAccounts:
                      - id: 1843
                        name: CosmosDBMI
                        displayName: CosmosDBMI
                      - id: 1844
                        name: AzureSQLregular
                        displayName: AzureSQLregular
                      - id: 1845
                        name: CosmosDBreg
                        displayName: CosmosDBreg
                      - id: 1846
                        name: SQLMItest
                        displayName: SQLMItest
                      - id: 1858
                        name: AzureDB-Chris
                        displayName: AzureDB-Chris
                      - id: 1859
                        name: Azure-DB2-ssl
                        displayName: Azure-DB2-ssl
                      - id: 1861
                        name: Azure-DB3-manualdeployed
                        displayName: Azure-DB3-manualdeployed
                      - id: 1863
                        name: AzureSQL-SQLRMApp
                        displayName: AzureSQL-SQLRMApp
                      - id: 1864
                        name: AzmangInstregular
                        displayName: AzmangInstregular
                      - id: 1865
                        name: venkat-sqlserver
                        displayName: venkat-sqlserver
                      - id: 1867
                        name: TestCloudAccountformysql
                        displayName: TestCloudAccountformysql
                      - id: 1868
                        name: TestCloudAccountformysql-2
                        displayName: TestCloudAccountformysql-2
                      - id: 1871
                        name: Azure-DB3-ametallic3
                        displayName: Azure-DB3-ametallic3
                      - id: 1877
                        name: TestCloudAccountformysql-3
                        displayName: TestCloudAccountformysql-3
                      - id: 1879
                        name: AzureDB-Chris-EastUS
                        displayName: AzureDB-Chris-EastUS
                      - id: 1880
                        name: CosmosUSCenteralMI
                        displayName: CosmosUSCenteralMI
                      - id: 1881
                        name: EastUSManid
                        displayName: EastUSManid
                      - id: 1895
                        name: test-CA
                        displayName: test-CA
                      - id: 1900
                        name: SQLVMEastUSMId
                        displayName: SQLVMEastUSMId
                      - id: 1908
                        name: azure5-userMI
                        displayName: azure5-userMI
                      - id: 1913
                        name: AzureSQL_MI-Chris
                        displayName: AzureSQL_MI-Chris
                      - id: 1915
                        name: ManInstApp
                        displayName: ManInstApp
                      - id: 1917
                        name: westusManId
                        displayName: westusManId
                      - id: 1918
                        name: venkatMI
                        displayName: venkatMI
                      - id: 1919
                        name: vmtesuswest_ManIden
                        displayName: vmtesuswest_ManIden
                      - id: 1920
                        name: CentralUSSysMaid
                        displayName: CentralUSSysMaid
                      - id: 1921
                        name: New_Cosmos_UserIden
                        displayName: New_Cosmos_UserIden
                      - id: 1922
                        name: uswestsystemident
                        displayName: uswestsystemident
                      - id: 1933
                        name: 78sysidenvmwest_2
                        displayName: 78sysidenvmwest_2
                      - id: 1936
                        name: NewEsaUsmanid
                        displayName: NewEsaUsmanid
                      - id: 1937
                        name: AzureSQL-Chris-SSMS
                        displayName: AzureSQL-Chris-SSMS
                      - id: 1939
                        name: Azure-workloadtest
                        displayName: Azure-workloadtest
                      - id: 1940
                        name: SQLVMEast_UserManId
                        displayName: SQLVMEast_UserManId
                      - id: 1941
                        name: eastus2sysmanid1
                        displayName: eastus2sysmanid1
                      - id: 1942
                        name: sqlvmeastususerManId1
                        displayName: sqlvmeastususerManId1
                      - id: 1943
                        name: SSMSUserMaId2
                        displayName: SSMSUserMaId2
                      - id: 1950
                        name: SQLVMSSMS_UserMaId
                        displayName: SQLVMSSMS_UserMaId
                      - id: 1953
                        name: Azure-WorkloadTest1
                        displayName: Azure-WorkloadTest1
                      - id: 1956
                        name: Azure5-CA5
                        displayName: Azure5-CA5
                      - id: 1964
                        name: azure5-CA6
                        displayName: azure5-CA6
                      - id: 1966
                        name: accessnode-test
                        displayName: accessnode-test
                      - id: 1973
                        name: azure5-MI
                        displayName: azure5-MI
                      - id: 1984
                        name: cindia-CA
                        displayName: cindia-CA
                      - id: 1996
                        name: testcloudaccount
                        displayName: testcloudaccount
                      - id: 1997
                        name: testaccount2_
                        displayName: testaccount2_
                      - id: 1998
                        name: testaccount2__
                        displayName: testaccount2__
                      - id: 1999
                        name: testaccount3__
                        displayName: testaccount3__
                      - id: 2001
                        name: testclientName
                        displayName: testclientName
                      - id: 2002
                        name: testclientName1
                        displayName: testclientName1
                      - id: 2003
                        name: Chris-Azure-RoleTest-MI
                        displayName: Chris-Azure-RoleTest-MI
                      - id: 2007
                        name: new_cloudaccounttest
                        displayName: new_cloudaccounttest
                      - id: 2015
                        name: new_cloudaccount_test6
                        displayName: new_cloudaccount_test6
                      - id: 2034
                        name: new_cloudaccount_test7
                        displayName: new_cloudaccount_test7
                      - id: 2036
                        name: new_cloudaccount_test8
                        displayName: new_cloudaccount_test8
                      - id: 2038
                        name: atest_msslq
                        displayName: atest_msslq
      description: 'GET API to list all the cloudAccounts '
      parameters:
        - schema:
            type: string
            enum:
              - COSMOS
              - MYSQL
              - POSTGRESQL
              - MARIA
              - MSSQL
          in: query
          name: dbType
          required: true
          description: Azure Cloud DB Types
  /V4/AzureDB/Maria/Instance:
    get:
      summary: Get Maria DB instances
      tags:
        - Maria
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/discoverInstancesresp'
              examples:
                example-1:
                  value:
                    rdsDBInstances:
                      - allocatedStorage: 102400
                        dbName: jah-mariadb
                        regionName: eastus
                        readReplicaSourceDBInstanceIdentifier: ''
                        availabilityZone: eastus
                        preferredBackupWindow: ''
                        dbInstanceStatus: Ready
                        secondaryAvailabilityZone: ''
                        engine: mysql
                        iops: -1237422264
                        publiclyAccessible: false
                        engineVersion: '10.3'
                        masterUsername: joelhoward
                        isMultAZ: true
                        dbInstanceIdentifier: mariadb/jah-mariadb
                        vpcSecurityGroup: ''
                        characterSetName: ''
                        instanceCreateTime: 4294967294
                        dBInstanceClass: ''
                        dbSecurityGroup: ''
                        endPoint: jah-mariadb.mariadb.database.azure.com
                        port: 3306
                        licenseModel: ''
                        preferredMaintenanceWindow: ''
                        backupRetentionPeriod: 7
                        dbSubnetGroup: ''
                        autoMinorVersionUpgrade: true
                        latestRestorableTime: 3056332224
                      - allocatedStorage: 102400
                        dbName: mariadb103
                        regionName: eastus
                        readReplicaSourceDBInstanceIdentifier: ''
                        availabilityZone: eastus
                        preferredBackupWindow: ''
                        dbInstanceStatus: Ready
                        secondaryAvailabilityZone: ''
                        engine: mysql
                        iops: -1237422264
                        publiclyAccessible: false
                        engineVersion: '10.3'
                        masterUsername: mariatest
                        isMultAZ: true
                        dbInstanceIdentifier: mariadb/mariadb103
                        vpcSecurityGroup: ''
                        characterSetName: ''
                        instanceCreateTime: 4294967294
                        dBInstanceClass: ''
                        dbSecurityGroup: ''
                        endPoint: mariadb103.mariadb.database.azure.com
                        port: 3306
                        licenseModel: ''
                        preferredMaintenanceWindow: ''
                        backupRetentionPeriod: 7
                        dbSubnetGroup: ''
                        autoMinorVersionUpgrade: true
                        latestRestorableTime: 3056332224
      operationId: get-V4-AzureDB-Maria-Instance
      description: ''
      parameters:
        - schema:
            type: integer
          in: query
          name: regionId
          description: Region ID
          required: true
        - schema:
            type: integer
          in: query
          name: cloudAccountId
          description: Cloud Account ID
          required: true
    post:
      tags:
        - Maria
      summary: ''
      operationId: post-V4-AzureDB-Maria-Instance
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IdName'
              examples:
                example-1:
                  value:
                    instance:
                      id: 1724
                      name: 'mariadb/mariadb103[eastus]'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                type: object
                properties: {}
              examples:
                If the instance name already exists:
                  value:
                    failedStage: PostInstance
                    errorCode: -1
                    errorMessage:
                      errorMessage: An instance by this name already exists.
                      errorCode: '3'
                      entity:
                        subclientId: '0'
                        clientId: '2015'
                        instanceName: 'mariadb/mariadb103[eastus]'
                        instanceId: '-1'
                        _type_: ROOT_ENTITY
      description: |-
        This endpoint will create a new instance provided

        Please get the dbInstanceIdentifier and port from the GET V4/AzureDB/Maria/Instance API
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/createMariaMySQLPostgreSQLInstance'
            examples:
              example-1:
                value:
                  region:
                    id: 9
                  cloudAccount:
                    id: 2015
                    name: new_cloudaccount_test6
                  dbInstanceIdentifier: mariadb/mariadb103
                  database:
                    username: xxxx
                    password: xxxx
                  endPoint: mariadb103.xxx.xxx.xxx.com
                  port: 3306
                  backupGateways:
                    - id: 1898
                      name: azmetallic5-MI-790422ef-cd2c-44a9-aaf6-c8a7b93ab941
                  plan:
                    id: 1638
        description: 'In this payload we need region, cloudAccount, database credentialsm endPoint, port, backupGateways and plan. All these inputs are required and case sensitive. API will fail if the inputs are not sufficient'
  /V4/AzureDB/MySQL/Instance:
    get:
      summary: Get MySQL Instances
      tags:
        - MySQL
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/discoverInstancesresp'
              examples:
                example-1:
                  value:
                    rdsDBInstances:
                      - allocatedStorage: 102400
                        dbName: mysqltestserver
                        regionName: eastus
                        readReplicaSourceDBInstanceIdentifier: ''
                        availabilityZone: eastus
                        preferredBackupWindow: ''
                        dbInstanceStatus: Ready
                        secondaryAvailabilityZone: ''
                        engine: mysql
                        iops: -132130768
                        publiclyAccessible: true
                        engineVersion: '8.0'
                        masterUsername: mytest
                        isMultAZ: true
                        dbInstanceIdentifier: mysqltestserver
                        vpcSecurityGroup: ''
                        characterSetName: ''
                        instanceCreateTime: 2927956568
                        dBInstanceClass: ''
                        dbSecurityGroup: ''
                        endPoint: mysqltestserver.mysql.database.azure.com
                        port: 3306
                        licenseModel: ''
                        preferredMaintenanceWindow: ''
                        backupRetentionPeriod: 7
                        dbSubnetGroup: ''
                        autoMinorVersionUpgrade: true
                        latestRestorableTime: 3057545024
                      - allocatedStorage: 5120
                        dbName: mysqlcloud1
                        regionName: eastus
                        readReplicaSourceDBInstanceIdentifier: ''
                        availabilityZone: eastus
                        preferredBackupWindow: ''
                        dbInstanceStatus: Ready
                        secondaryAvailabilityZone: ''
                        engine: mysql
                        iops: -132130768
                        publiclyAccessible: true
                        engineVersion: '5.7'
                        masterUsername: mysql_admin
                        isMultAZ: true
                        dbInstanceIdentifier: mysqlcloud1
                        vpcSecurityGroup: ''
                        characterSetName: ''
                        instanceCreateTime: 2927956568
                        dBInstanceClass: ''
                        dbSecurityGroup: ''
                        endPoint: mysqlcloud1.mysql.database.azure.com
                        port: 3306
                        licenseModel: ''
                        preferredMaintenanceWindow: ''
                        backupRetentionPeriod: 7
                        dbSubnetGroup: ''
                        autoMinorVersionUpgrade: true
                        latestRestorableTime: 3057545024
      operationId: get-V4-AzureDB-MySQL-Instance
      parameters:
        - schema:
            type: integer
          in: query
          name: regionId
          required: true
        - schema:
            type: integer
          in: query
          name: cloudAccountId
          required: true
    post:
      tags:
        - MySQL
      summary: Create MySQL Instance
      operationId: post-V4-AzureDB-MySQL-Instance
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/postInstanceResp'
              examples:
                example-1:
                  value:
                    instance:
                      name: 'mysqltestserver[eastus]'
                      id: 1730
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                type: object
                properties: {}
              examples:
                Instance aready exists:
                  value:
                    failedStage: PostInstance
                    errorCode: -1
                    errorMessage:
                      errorMessage: An instance by this name already exists.
                      errorCode: '3'
                      entity:
                        subclientId: '0'
                        clientId: '2034'
                        instanceName: 'mysqltestserver[eastus]'
                        instanceId: '-1'
                        _type_: ROOT_ENTITY
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties: {}
              examples:
                backupGateway is offline:
                  value:
                    failedStage: PostInstance
                    errorCode: -1
                    errorMessage:
                      errorMessage: 'Unable to connect to client [azmetallic5-MI] to execute [MySqlBrowseAgent].\\nPlease ensure that all iDataAgent software is properly installed.\\nAlso check network connectivity and if this product''s services are running.'
                      errorCode: '4444'
                      entity:
                        subclientId: '0'
                        clientId: '2034'
                        instanceName: 'mysqltestserver[eastus]'
                        instanceId: '1961'
                        _type_: ROOT_ENTITY
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/createMariaMySQLPostgreSQLInstance'
            examples:
              example-1:
                value:
                  region:
                    id: 9
                  cloudAccount:
                    id: 2015
                    name: new_cloudaccount_test6
                  dbInstanceIdentifier: mysqltestserver
                  database:
                    username: xxx
                    password: xxx
                  endPoint: mysqltestserver.mysql.database.azure.com
                  port: 3306
                  backupGateways:
                    - id: 1898
                      name: azmetallic5-MI-790422ef-cd2c-44a9-aaf6-c8a7b93ab941
                  plan:
                    id: 1638
          application/xml:
            schema:
              type: object
              properties: {}
        description: ''
  /V4/AzureDB/PostgreSQL/Instance:
    get:
      summary: Get postgresql instances
      tags:
        - PostgreSQL
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/discoverInstancesresp'
              examples:
                example-1:
                  value:
                    rdsDBInstances:
                      - allocatedStorage: 51200
                        dbName: pg11servereastus
                        regionName: eastus
                        readReplicaSourceDBInstanceIdentifier: ''
                        availabilityZone: eastus
                        preferredBackupWindow: ''
                        dbInstanceStatus: Ready
                        secondaryAvailabilityZone: ''
                        engine: postgresql
                        iops: -132130768
                        publiclyAccessible: true
                        engineVersion: '11'
                        masterUsername: postgres
                        isMultAZ: true
                        dbInstanceIdentifier: pg11servereastus
                        vpcSecurityGroup: ''
                        characterSetName: ''
                        instanceCreateTime: 2927961440
                        dBInstanceClass: ''
                        dbSecurityGroup: ''
                        endPoint: pg11servereastus.postgres.database.azure.com
                        port: 5432
                        licenseModel: ''
                        preferredMaintenanceWindow: ''
                        backupRetentionPeriod: 7
                        dbSubnetGroup: ''
                        autoMinorVersionUpgrade: true
                        latestRestorableTime: 3057545024
                      - allocatedStorage: 51200
                        dbName: jah-pgdb
                        regionName: eastus
                        readReplicaSourceDBInstanceIdentifier: ''
                        availabilityZone: eastus
                        preferredBackupWindow: ''
                        dbInstanceStatus: Ready
                        secondaryAvailabilityZone: ''
                        engine: postgresql
                        iops: -132130768
                        publiclyAccessible: true
                        engineVersion: '11'
                        masterUsername: postgres
                        isMultAZ: true
                        dbInstanceIdentifier: jah-pgdb
                        vpcSecurityGroup: ''
                        characterSetName: ''
                        instanceCreateTime: 2927961440
                        dBInstanceClass: ''
                        dbSecurityGroup: ''
                        endPoint: jah-pgdb.postgres.database.azure.com
                        port: 5432
                        licenseModel: ''
                        preferredMaintenanceWindow: ''
                        backupRetentionPeriod: 7
                        dbSubnetGroup: ''
                        autoMinorVersionUpgrade: true
                        latestRestorableTime: 3057545024
      operationId: get-V4-AzureDB-PostgreSQL-Instance
      parameters:
        - schema:
            type: integer
          in: query
          name: regionId
          required: true
        - schema:
            type: integer
          in: query
          name: cloudAccountId
          required: true
      description: Get the list of PostgreSQL
    post:
      tags:
        - PostgreSQL
      summary: Create PostgreSQL
      operationId: post-V4-AzureDB-PostgreSQL-Instance
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/postInstanceResp'
              examples:
                example-1:
                  value:
                    instance:
                      name: 'pg11servereastus[eastus]'
                      id: 1734
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties: {}
              examples:
                Server already exists:
                  value:
                    failedStage: PostInstance
                    errorCode: -1
                    errorMessage:
                      errorMessage: 'Provided Port Number [pg11servereastus.zzz.xxx.xxx.com:5432] is already in use. Please provide another port.'
                      errorCode: '1'
                      entity:
                        subclientId: '0'
                        clientId: '2015'
                        instanceName: 'pg11servereastus[eastus]'
                        instanceId: '-1'
                        _type_: ROOT_ENTITY
                Server connection failure:
                  value:
                    failedStage: PostInstance
                    errorCode: -1
                    errorMessage:
                      errorMessage: 'Unable to connect to client [] to execute [PostgreSQLBrowseAgent].\\nPlease ensure that all iDataAgent software is properly installed.\\nAlso check network connectivity and if this product''s services are running.'
                      errorCode: '4444'
                      entity:
                        subclientId: '0'
                        clientId: '2015'
                        instanceName: 'pg11servereastus[eastus]'
                        instanceId: '1962'
                        _type_: ROOT_ENTITY
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/createMariaMySQLPostgreSQLInstance'
            examples:
              example-1:
                value:
                  region:
                    id: 9
                  cloudAccount:
                    id: 2015
                    name: new_cloudaccount_test6
                  dbInstanceIdentifier: pg11servereastus
                  database:
                    username: xxx
                    password: xxx
                  endPoint: pg11servereastus.postgres.database.azure.com
                  port: 5432
                  backupGateways:
                    - id: 1898
                      name: azmetallic5-MI-790422ef-cd2c-44a9-aaf6-c8a7b93ab941
                  plan:
                    id: 1638
        description: ''
  /V4/AzureDB/MSSQL/Credentials:
    get:
      summary: Get MSSQL Credentials
      tags:
        - MSSQL
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/getCredentials'
              examples:
                example-1:
                  value:
                    credentialManager:
                      - id: 334
                        name: dummy-donot-use
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 336
                        name: AzureSQLServer-Chris
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 338
                        name: AzureSQLServer-cvadmin
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 339
                        name: SQLServer-peter
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 345
                        name: AzureSQLServer-AD-NonMFA
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 346
                        name: AzureSQLServer-cvadmin2
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 347
                        name: Mainstadmin
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 353
                        name: SQLMIEastUSadmin
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 354
                        name: SQLMIEaUSadm2
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 357
                        name: AzureSQLServer-sqladmin
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 360
                        name: ManEaUSsqladmin
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 361
                        name: ManInstsqladmin
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 362
                        name: sqladminwestus
                        accountType: SQL_SERVER_ACCOUNT
                      - id: 365
                        name: 0708MaIdsqladmin
                        accountType: SQL_SERVER_ACCOUNT
      operationId: get-V4-AzureDB-MSSQL-Credentials
      description: 'Get the list of credentials for MSSQL Cloud DB : Azure'
    post:
      summary: ''
      operationId: post-V4-AzureDB-MSSQL-Credentials
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties: {}
              examples:
                example-1:
                  value:
                    credential:
                      id: 441
                    errorMessage: Successful!
                    errorCode: 0
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties: {}
              examples:
                Credential account already exists:
                  value:
                    errorMessage: 'Credential account [testcrednt] already exists. Use other credentials.'
                    errorCode: 587206339
      description: Create Azure DB  MSSQL Credentials
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/createMSSQLCreds'
            examples:
              example-1:
                value:
                  name: testmssqlcreda
                  userAccount: userAccount
                  password: Q29tbXZhdWx0ITEy
                  description: description test
              Credential already exists:
                value:
                  name: testcredent
                  userAccount: userAccount
                  password: Q29tbXZhdWx0ITEy
                  description: description test
  /V4/Azure/MSSQL/Instance:
    get:
      summary: MSSQL Instance
      tags:
        - MSSQL
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/geMSSQLInstances'
              examples:
                example-1:
                  value:
                    sqlDiscoveredServer:
                      - type: Azure Managed DataBase Engine
                        instanceName: sqlami-eastus.0b6ca3d85c3b.database.windows.net
      operationId: get-V4-Azure-MSSQL-Instance
      parameters:
        - schema:
            type: integer
          in: query
          name: cloudAccountId
          description: Cloud Account Id
          required: true
        - schema:
            type: integer
          in: query
          name: regionId
          description: region id
          required: true
      description: Get the List of MSSQL Instance
    post:
      summary: ''
      tags:
        - MSSQL
      operationId: post-V4-Azure-MSSQL-Instance
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IdName'
              examples:
                example-1:
                  value:
                    instance:
                      name: sqlami-eastus.xxx.database.windows.net
                      id: 1748
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/createMSSQLinstance'
            examples:
              example-1:
                value:
                  instanceName: sqlami-eastus.xxx.database.windows.net
                  connectionString: xxxxt
                  credential:
                    id: 357
                    name: xxx
                  cloudAccount:
                    id: 2038
                    name: atest_msslq
                  plan:
                    id: 1638
                  backupGateways:
                    - id: 1935
                      name: SQLEastUS-SSMS-2e5fcf76-ab51-415d-8b45-b4460a2ee142
        description: ''
      description: Create a MSSQL Cloud DB Instance on Metallic Azure
  /V4/AzureDB/Cosmos/CloudDBContentPreview:
    parameters: []
    post:
      summary: Preview subclients
      operationId: post-V4-AzureDB-Cosmos-CloudDBContentPreview
      tags:
        - Cosmos
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/cloudDBPreviewResp'
              examples:
                example-1:
                  value:
                    cloudDBEntity:
                      type: 17
                      children:
                        - path: doshinsky-cosmos-1
                          displayName: CosTestDB
                          name: CosTestDB
                          type: 44
                          value: eastus
                        - path: doshinsky-cosmos-1
                          displayName: FamilyDatabase
                          name: FamilyDatabase
                          type: 44
                          value: eastus
                        - path: doshinsky-cosmos-1
                          displayName: FastDB
                          name: FastDB
                          type: 44
                          value: eastus
                        - path: doshinsky-cosmos-1
                          displayName: Volcanoes
                          name: Volcanoes
                          type: 44
                          value: eastus
                        - path: doshinsky-cosmos-1
                          displayName: SampleDB
                          name: SampleDB
                          type: 44
                          value: eastus
                    errorResp:
                      errorCode: 0
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/cloudDBContentPreview'
            examples:
              example-1:
                value:
                  region:
                    id: 9
                  cloudAccount:
                    id: 2015
                    name: new_cloudaccount_test6
                  browsePath: doshinsky-cosmos-1
        description: ''
      description: Preview the Cloud DB contents for Cosmos Instance
  /V4/AzureDB/Cosmos/Instance:
    post:
      summary: Create cosmos instance
      operationId: post-V4-AzureDB-Cosmos-Instance
      tags:
        - Cosmos
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/postInstanceResp'
              examples:
                example-2:
                  value:
                    instance:
                      id: 1752
                      name: 'SQL API [eastus]'
                example-1:
                  value:
                    instance:
                      id: 1958
                      name: 'SQL API [eastus]'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties: {}
              examples:
                Instance already exists:
                  value:
                    errorMessage: An instance by this name already exists.
                    errorCode: 3
                    entity:
                      subclientId: 0
                      clientId: 2038
                      instanceName: sqlami-eastus.0b6ca3d85c3b.database.windows.net
                      instanceId: -1
                      _type_: 0
      description: 'Create a Cosmos Cloud DB Instance on metallic azure '
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/createCosmos'
            examples:
              example-1:
                value:
                  cloudAccount:
                    id: 2034
                    name: new_cloudaccount_test7
                  region:
                    id: 9
                  plan:
                    id: 1638
                  backupGateways:
                    - id: 1898
                      name: azmetallic5-MI-790422ef-cd2c-44a9-aaf6-c8a7b93ab941
              Create Instance with cloudDBContent:
                value:
                  cloudAccount:
                    id: 2034
                    name: new_cloudaccount_test7
                  region:
                    id: 9
                  plan:
                    id: 1638
                  backupGateways:
                    - id: 1898
                      name: azmetallic5-MI-790422ef-cd2c-44a9-aaf6-c8a7b93ab941
                  cloudDBContent:
                    children:
                      - path: doshinsky-cosmos-1
                        displayName: CosTestDB
                        name: CosTestDB
                        type: 44
                        value: eastus
        description: Cloud DB Content is optional . If not provided all containers in the DB are backed up
  /V4/Virtualization/plan/eligible:
    get:
      summary: Get eligible plans for hypervisor
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/getPlansResp'
              examples:
                example-1:
                  value:
                    plans:
                      - id: 1872
                        name: AZDB1eastus-AZDB1eastus2
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '3'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          SecondaryStorageType: Cloud
                          AssociatedEntitiesCount: '1'
                      - id: 1898
                        name: AzurePaaS-Plan
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '0'
                      - id: 1740
                        name: ByosMrrCool
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '3'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          SecondaryStorageType: Cloud
                          AssociatedEntitiesCount: '0'
                      - id: 1737
                        name: Cindia-plan
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '5'
                      - id: 1648
                        name: cvmetallic-azuredb1-metallic-o365-storage-eastus2
                        summary:
                          RPOHours: '8'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: Infinite
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '1'
                      - id: 1889
                        name: cvmetallic-azuredb1-metallic-sf-eastus2
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: Infinite
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '0'
                      - id: 1675
                        name: CVMetallic-AzureDB1-RDSPlan
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '3'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '3'
                      - id: 1622
                        name: CVMetallic-AzureDB1-testplan
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '6'
                      - id: 1668
                        name: DB-Plan-SecCopy
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '3'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          SecondaryStorageType: Cloud
                          AssociatedEntitiesCount: '6'
                      - id: 1827
                        name: EUS2EUS2DT
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '3'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          SecondaryStorageType: Cloud
                          AssociatedEntitiesCount: '0'
                      - id: 1929
                        name: gk1
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '1'
                      - id: 1928
                        name: hh
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '0'
                      - id: 1638
                        name: MAS-DB-custom-2d
                        summary:
                          RPOHours: '48'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '12'
                      - id: 1624
                        name: MAS-DB-Plan
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '23'
                      - id: 1627
                        name: MCS-DB-Plan
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '4'
                      - id: 1739
                        name: MrrHotMrrCool
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '3'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          SecondaryStorageType: Cloud
                          AssociatedEntitiesCount: '0'
                      - id: 1760
                        name: New
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '0'
                      - id: 1657
                        name: new plan
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '12'
                      - id: 1716
                        name: plan-MAS2
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '2'
                      - id: 1850
                        name: plan-pika
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '3'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          SecondaryStorageType: Cloud
                          AssociatedEntitiesCount: '0'
                      - id: 1722
                        name: plan-test
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '0'
                      - id: 1644
                        name: SQLCUSPlan
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '8'
                      - id: 1916
                        name: storage-ven
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '0'
                      - id: 1732
                        name: swt1
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '0'
                      - id: 1874
                        name: test
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '0'
                      - id: 1876
                        name: test-dbplan
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '1'
                      - id: 1659
                        name: test-plan
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '0'
                      - id: 1626
                        name: testDT
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '1'
                      - id: 1651
                        name: testDT0retention
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '1'
                      - id: 1628
                        name: testdt1
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '7'
                      - id: 1723
                        name: testDTPrimaryMRRHotSecBYOS
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '0'
                      - id: 1639
                        name: TestM
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '0'
                      - id: 1640
                        name: TestM2
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Year
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '0'
                      - id: 1641
                        name: TestM3
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 3 Years
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '0'
                      - id: 1642
                        name: TestM4
                        summary:
                          RPOHours: '336'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 40 Days
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '0'
                      - id: 1643
                        name: TestM5
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '0'
                      - id: 1649
                        name: testm8
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '0'
                      - id: 1673
                        name: westusplan
                        summary:
                          RPOHours: '24'
                          NumberOfCopies: '2'
                          PrimaryStorageRetention: 1 Month
                          PrimaryStorageType: Cloud
                          AssociatedEntitiesCount: '2'
      operationId: get-V4-Virtualization-plan
      parameters:
        - schema:
            type: integer
          in: query
          name: hypervisorId
          description: Client ID of the Hypervisor. Default value 0
          required: true
      description: 'List of all the plans eligible for hypervisor. '
    parameters: []
components:
  schemas:
    createCloudAccount:
      type: object
      x-examples:
        example-1:
          name: string
          subscriptionId: string
          region:
            id: 0
            name: string
          backupGateways:
            - id: 0
              name: string
          credential:
            id: 0
            name: string
          company:
            id: 0
            name: string
      description: Payload for cloud Account Creation
      properties:
        name:
          type: string
          description: Cloud Account Name
        subscriptionId:
          type: string
          description: Subscription ID
        region:
          $ref: '#/components/schemas/IdName'
        backupGateways:
          $ref: '#/components/schemas/accessNodes'
        credential:
          $ref: '#/components/schemas/IdName'
        company:
          $ref: '#/components/schemas/IdName'
      required:
        - name
        - subscriptionId
        - region
        - backupGateways
    createStoragePool:
      type: object
      x-examples: {}
      description: ''
      properties:
        type:
          type: string
          description: |
            Type of the cloud storage
          enum:
            - Metallic
            - Azure
        name:
          type: string
          description: Name of the storage pool
        credential:
          $ref: '#/components/schemas/IdName'
        region:
          $ref: '#/components/schemas/IdName'
        storageClass:
          type: string
          enum:
            - MRR_HOT
            - MRR_COOL
          description: Storage Class
        container:
          type: string
          description: Container / Library Name
        backupGateways:
          $ref: '#/components/schemas/accessNodes'
      required:
        - type
        - region
    getCloudAppsList:
      type: object
      x-examples:
        example-1:
          cloudAccounts:
            - Id: 1843
              name: CosmosDBMI
              displayName: CosmosDBMI
      description: Get cloud Apps List
      title: ''
      properties:
        cloudAccounts:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
              name:
                type: string
              displayName:
                type: string
      required:
        - cloudAccounts
    getStoragePoolListresp:
      type: object
      x-examples: {}
      description: List of storage pools response
      properties:
        cloudStorage:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
              name:
                type: string
              type:
                type: string
              status:
                type: string
    getCredentials:
      type: object
      x-examples:
        example-1:
          credentialManager:
            - id: 324
              name: azure-cred
              accountType: CLOUD_ACCOUNT
              vendorType: MICROSOFT_AZURE_TYPE
              authType: AZUREACCOUNT
            - id: 326
              name: AzureSQLCreds
              accountType: CLOUD_ACCOUNT
              vendorType: MICROSOFT_AZURE_TYPE
              authType: AZUREACCOUNT
            - id: 327
              name: CosmosCredreg
              accountType: CLOUD_ACCOUNT
              vendorType: MICROSOFT_AZURE_TYPE
              authType: AZUREACCOUNT
            - id: 332
              name: TestM
              accountType: CLOUD_ACCOUNT
              vendorType: MICROSOFT_AZURE_TYPE
              authType: MICROSOFT_AZURE
            - id: 333
              name: AzureSQLTeam-SQLRMApp1
              accountType: CLOUD_ACCOUNT
              vendorType: MICROSOFT_AZURE_TYPE
              authType: AZUREACCOUNT
            - id: 334
              name: dummy-donot-use
              accountType: SQL_SERVER_ACCOUNT
            - id: 335
              name: AZMangInstRegul
              accountType: CLOUD_ACCOUNT
              vendorType: MICROSOFT_AZURE_TYPE
              authType: AZUREACCOUNT
            - id: 336
              name: AzureSQLServer-Chris
              accountType: SQL_SERVER_ACCOUNT
            - id: 337
              name: MangedinstanceRegular
              accountType: CLOUD_ACCOUNT
              vendorType: MICROSOFT_AZURE_TYPE
              authType: AZUREACCOUNT
            - id: 338
              name: AzureSQLServer-cvadmin
              accountType: SQL_SERVER_ACCOUNT
            - id: 339
              name: SQLServer-peter
              accountType: SQL_SERVER_ACCOUNT
            - id: 341
              name: azure-CA-Page
              accountType: CLOUD_ACCOUNT
              vendorType: MICROSOFT_AZURE_TYPE
              authType: AZUREACCOUNT
            - id: 344
              name: azure-storage-ash
              accountType: CLOUD_ACCOUNT
              vendorType: MICROSOFT_AZURE_TYPE
              authType: MICROSOFT_AZURE
            - id: 345
              name: AzureSQLServer-AD-NonMFA
              accountType: SQL_SERVER_ACCOUNT
            - id: 346
              name: AzureSQLServer-cvadmin2
              accountType: SQL_SERVER_ACCOUNT
            - id: 347
              name: Mainstadmin
              accountType: SQL_SERVER_ACCOUNT
            - id: 350
              name: testCred
              accountType: CLOUD_ACCOUNT
              vendorType: MICROSOFT_AZURE_TYPE
              authType: MICROSOFT_AZURE
            - id: 352
              name: dummy
              accountType: CLOUD_ACCOUNT
              vendorType: MICROSOFT_AZURE_TYPE
              authType: AZUREACCOUNT
            - id: 353
              name: SQLMIEastUSadmin
              accountType: SQL_SERVER_ACCOUNT
            - id: 354
              name: SQLMIEaUSadm2
              accountType: SQL_SERVER_ACCOUNT
            - id: 357
              name: AzureSQLServer-sqladmin
              accountType: SQL_SERVER_ACCOUNT
            - id: 359
              name: ManInstApp
              accountType: CLOUD_ACCOUNT
              vendorType: MICROSOFT_AZURE_TYPE
              authType: AZUREACCOUNT
            - id: 360
              name: ManEaUSsqladmin
              accountType: SQL_SERVER_ACCOUNT
            - id: 361
              name: ManInstsqladmin
              accountType: SQL_SERVER_ACCOUNT
            - id: 362
              name: sqladminwestus
              accountType: SQL_SERVER_ACCOUNT
            - id: 363
              name: vsardscreds
              accountType: CLOUD_ACCOUNT
              vendorType: AMAZON
              authType: AMAZON_S3
            - id: 364
              name: awscreds-aash
              accountType: CLOUD_ACCOUNT
              vendorType: AMAZON
              authType: AMAZON_S3
            - id: 365
              name: 0708MaIdsqladmin
              accountType: SQL_SERVER_ACCOUNT
            - id: 372
              name: sheza-testVSA-azure
              accountType: CLOUD_ACCOUNT
              vendorType: MICROSOFT_AZURE_TYPE
              authType: AZUREACCOUNT
            - id: 376
              name: testcredential
              accountType: CLOUD_ACCOUNT
              vendorType: MICROSOFT_AZURE_TYPE
              authType: MICROSOFT_AZURE
      properties:
        credentialManager:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
              name:
                type: string
              accountType:
                type: string
              vendorType:
                type: string
              authType:
                type: string
            required:
              - id
              - name
              - accountType
      description: Get list of credentials
    getbackupgateways:
      type: object
      x-examples:
        example-1:
          backupGateways:
            - Id: 1860
              Name: azmetallic3-d2f53950-9716-48f0-91b7-88e8ab591040
            - Id: 1898
              Name: azmetallic5-MI-790422ef-cd2c-44a9-aaf6-c8a7b93ab941
            - Id: 1970
              Name: azmetallic6-9c80cdf5-9525-4a3f-9666-a5260a45a938
            - Id: 1848
              Name: Backupgateway-324874db-2ef7-4bbc-9779-a1a18fc3d44c
            - Id: 1935
              Name: SQLEastUS-SSMS-2e5fcf76-ab51-415d-8b45-b4460a2ee142
            - Id: 1912
              Name: SQLVMEastUS-59bf9cc7-a0c1-4ae0-a7de-3357598cdf1b
      description: Get Backup gateways API Response
      properties:
        backupGateways:
          type: array
          items:
            type: object
            properties:
              Id:
                type: integer
              Name:
                type: string
    IdName:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
      x-examples: {}
      description: 'Generic id name '
    getPlansResp:
      type: object
      properties:
        plans:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
              name:
                type: string
              summary:
                type: object
                properties:
                  RPOHours:
                    type: string
                  NumberOfCopies:
                    type: string
                  PrimaryStorageRetention:
                    type: string
                  PrimaryStorageType:
                    type: string
                  AssociatedEntitiesCount:
                    type: string
      x-examples:
        example-1:
          plans:
            - id: 1638
              name: MAS-DB-custom-2d
              summary:
                RPOHours: '48'
                NumberOfCopies: '2'
                PrimaryStorageRetention: 1 Month
                PrimaryStorageType: Cloud
                AssociatedEntitiesCount: '13'
            - id: 1624
              name: MAS-DB-Plan
              summary:
                RPOHours: '24'
                NumberOfCopies: '2'
                PrimaryStorageRetention: 1 Month
                PrimaryStorageType: Cloud
                AssociatedEntitiesCount: '21'
            - id: 1649
              name: testm8
              summary:
                RPOHours: '24'
                NumberOfCopies: '2'
                PrimaryStorageRetention: 1 Month
                PrimaryStorageType: Cloud
                AssociatedEntitiesCount: '0'
      description: 'Get plans response '
    createMariaMySQLPostgreSQLInstance:
      title: createMariaMySQLPostgreSQLInstance
      x-stoplight:
        id: kkms0vrv6xufm
      type: object
      description: Create the DB Instance for the type Maria/MySQL/PostGreSQL Instance
      x-examples:
        example-1:
          dbInstanceIdentifier: string
          region:
            id: 0
            name: string
          cloudAccount:
            id: 0
            name: string
          database:
            username: string
            password: string
          endPoint: string
          port: 0
          SSL_CA_Certificate: string
          plan:
            id: 0
            name: string
          accessNodes:
            - id: 0
              name: string
      properties:
        dbInstanceIdentifier:
          type: string
        region:
          $ref: '#/components/schemas/IdName'
        cloudAccount:
          $ref: '#/components/schemas/IdName'
        database:
          type: object
          required:
            - username
            - password
          properties:
            username:
              type: string
            password:
              type: string
        endPoint:
          type: string
        port:
          type: integer
        SSL_CA_Certificate:
          type: string
        plan:
          $ref: '#/components/schemas/IdName'
        backupGateways:
          $ref: '#/components/schemas/accessNodes'
      required:
        - dbInstanceIdentifier
        - region
        - cloudAccount
        - database
        - endPoint
        - port
        - plan
        - backupGateways
    cloudDBContentPreview:
      title: cloudDBContentPreview
      x-stoplight:
        id: 91b5ub2w96z3l
      type: object
      properties:
        region:
          $ref: '#/components/schemas/IdName'
        cloudAccount:
          $ref: '#/components/schemas/IdName'
        instanceName:
          type: string
          description: 'optional input instance name '
        browsePath:
          type: string
      required:
        - region
        - cloudAccount
      description: Payload for CloudDB Content Preview
    postInstanceResp:
      type: object
      x-examples:
        example-1:
          instance:
            id: 0
            name: string
      properties:
        instance:
          $ref: '#/components/schemas/IdName'
      description: 'Instance creation API Response '
    discoverInstancesresp:
      type: object
      properties:
        rdsDBInstances:
          type: array
          items:
            type: object
            properties:
              allocatedStorage:
                type: integer
              dbName:
                type: string
              regionName:
                type: string
              readReplicaSourceDBInstanceIdentifier:
                type: string
              availabilityZone:
                type: string
              preferredBackupWindow:
                type: string
              dbInstanceStatus:
                type: string
              secondaryAvailabilityZone:
                type: string
              engine:
                type: string
              iops:
                type: integer
              publiclyAccessible:
                type: boolean
              engineVersion:
                type: string
              masterUsername:
                type: string
              isMultAZ:
                type: boolean
              dbInstanceIdentifier:
                type: string
              vpcSecurityGroup:
                type: string
              characterSetName:
                type: string
              instanceCreateTime:
                type: integer
              dBInstanceClass:
                type: string
              dbSecurityGroup:
                type: string
              endPoint:
                type: string
              port:
                type: integer
              licenseModel:
                type: string
              preferredMaintenanceWindow:
                type: string
              backupRetentionPeriod:
                type: integer
              dbSubnetGroup:
                type: string
              autoMinorVersionUpgrade:
                type: boolean
              latestRestorableTime:
                type: integer
      x-examples:
        example-1:
          rdsDBInstances:
            - allocatedStorage: 102400
              dbName: jah-mariadb
              regionName: eastus
              readReplicaSourceDBInstanceIdentifier: ''
              availabilityZone: eastus
              preferredBackupWindow: ''
              dbInstanceStatus: Ready
              secondaryAvailabilityZone: ''
              engine: mysql
              iops: -1237422264
              publiclyAccessible: false
              engineVersion: '10.3'
              masterUsername: joelhoward
              isMultAZ: true
              dbInstanceIdentifier: mariadb/jah-mariadb
              vpcSecurityGroup: ''
              characterSetName: ''
              instanceCreateTime: 4294967294
              dBInstanceClass: ''
              dbSecurityGroup: ''
              endPoint: jah-mariadb.mariadb.database.azure.com
              port: 3306
              licenseModel: ''
              preferredMaintenanceWindow: ''
              backupRetentionPeriod: 7
              dbSubnetGroup: ''
              autoMinorVersionUpgrade: true
              latestRestorableTime: 3056332224
            - allocatedStorage: 102400
              dbName: mariadb103
              regionName: eastus
              readReplicaSourceDBInstanceIdentifier: ''
              availabilityZone: eastus
              preferredBackupWindow: ''
              dbInstanceStatus: Ready
              secondaryAvailabilityZone: ''
              engine: mysql
              iops: -1237422264
              publiclyAccessible: false
              engineVersion: '10.3'
              masterUsername: mariatest
              isMultAZ: true
              dbInstanceIdentifier: mariadb/mariadb103
              vpcSecurityGroup: ''
              characterSetName: ''
              instanceCreateTime: 4294967294
              dBInstanceClass: ''
              dbSecurityGroup: ''
              endPoint: mariadb103.mariadb.database.azure.com
              port: 3306
              licenseModel: ''
              preferredMaintenanceWindow: ''
              backupRetentionPeriod: 7
              dbSubnetGroup: ''
              autoMinorVersionUpgrade: true
              latestRestorableTime: 3056332224
      description: Discover Instances API Response
      title: ''
    getCosmosSubclient:
      title: getCosmosSubclient
      x-stoplight:
        id: zpname2uqx0pw
      type: object
      x-examples:
        example-1:
          subClients:
            client:
              id: 0
              name: string
            backupset:
              id: 0
              name: string
            subClient:
              id: 0
              name: string
      properties:
        subClients:
          type: array
          items:
            type: object
            properties:
              client:
                $ref: '#/components/schemas/IdName'
              backupset:
                $ref: '#/components/schemas/IdName'
              subclient:
                $ref: '#/components/schemas/IdName'
      description: Get subclients for cosmos DB
    accessNodes:
      title: accessNodes
      x-stoplight:
        id: d149lw278zcdx
      x-examples:
        example-1:
          - id: 0
            name: string
      type: array
      items:
        $ref: '#/components/schemas/IdName'
      description: Access Nodes Array
    createMSSQLinstance:
      title: createMSSQLinstance
      x-stoplight:
        id: hvveayk47owql
      type: object
      description: Create instance of MSSQL Azure
      x-examples: {}
      properties:
        instanceName:
          type: string
          description: MSSQL Server Instance name
        connectionString:
          type: string
          description: MSSQL Connection string
        credential:
          $ref: '#/components/schemas/IdName'
        cloudAccount:
          $ref: '#/components/schemas/IdName'
        backupGateways:
          $ref: '#/components/schemas/accessNodes'
        company:
          $ref: '#/components/schemas/IdName'
        plan:
          $ref: '#/components/schemas/IdName'
      required:
        - instanceName
        - connectionString
        - credential
        - cloudAccount
        - backupGateways
        - plan
    geMSSQLInstances:
      type: object
      x-examples:
        example-1:
          sqlDiscoveredServer:
            - type: Azure Managed DataBase Engine
              name: sqlami-eastus.0b6ca3d85c3b.database.windows.net
      properties:
        sqlDiscoveredServer:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
              instanceName:
                type: string
      title: getMSSQLInstanceResponse
      description: Get discovered MSSQL Instances response
    cloudDBPreviewResp:
      type: object
      properties:
        cloudDBEntity:
          type: object
          properties:
            type:
              type: integer
            children:
              type: array
              items:
                type: object
                properties:
                  path:
                    type: string
                  displayName:
                    type: string
                  name:
                    type: string
                  type:
                    type: integer
                  value:
                    type: string
        errorResp:
          type: object
          properties:
            errorCode:
              type: integer
      x-examples:
        example-1:
          cloudDBEntity:
            type: 17
            children:
              - path: doshinsky-cosmos-1
                displayName: CosTestDB
                name: CosTestDB
                type: 44
                value: eastus
              - path: doshinsky-cosmos-1
                displayName: FamilyDatabase
                name: FamilyDatabase
                type: 44
                value: eastus
              - path: doshinsky-cosmos-1
                displayName: FastDB
                name: FastDB
                type: 44
                value: eastus
              - path: doshinsky-cosmos-1
                displayName: Volcanoes
                name: Volcanoes
                type: 44
                value: eastus
              - path: doshinsky-cosmos-1
                displayName: SampleDB
                name: SampleDB
                type: 44
                value: eastus
          errorResp:
            errorCode: 0
      title: ''
      description: Cloud DB Preview Response
    updateCosmosSubclient:
      type: object
      properties:
        children:
          type: array
          items:
            type: object
            properties:
              path:
                type: string
              negation:
                type: boolean
              displayname:
                type: string
              name:
                type: string
              allOrAnyChildren:
                type: boolean
              type:
                type: integer
      x-examples:
        example-1:
          children:
            - path: string
              negation: true
              displayname: string
              name: string
              allOrAnyChildren: true
              type: 0
      description: Payload contains the Array of the contents of the Cosmos DB that should be explicitly backed up. We get this from cloudDBContentPreview API for COSMOS DB.
    createCosmos:
      title: createCosmos
      x-stoplight:
        id: qo64icuhxdimg
      type: object
      x-examples:
        example-1:
          cloudAccount:
            id: 0
            name: string
          region:
            id: 0
            name: string
          plan:
            id: 0
            name: string
          backupGateways:
            - id: 0
              name: string
          cloudDBContent:
            children:
              - path: string
                negation: true
                displayname: string
                name: string
                allOrAnyChildren: true
                type: 0
      description: Create a cosmos DB Instance
      properties:
        cloudAccount:
          $ref: '#/components/schemas/IdName'
        region:
          $ref: '#/components/schemas/IdName'
        plan:
          $ref: '#/components/schemas/IdName'
        backupGateways:
          $ref: '#/components/schemas/accessNodes'
        cloudDBContent:
          $ref: '#/components/schemas/updateCosmosSubclient'
      required:
        - cloudAccount
        - region
        - plan
    createStorageCredential:
      title: createStorageCredential
      x-stoplight:
        id: ymi4x7zgc267j
      type: object
      x-examples:
        example-1:
          name: string
          accountName: string
          accesskeyId: string
          description: string
      properties:
        name:
          type: string
        accountName:
          type: string
        accesskey:
          type: string
        description:
          type: string
      required:
        - name
        - accountName
        - accesskey
    createCloudAccountCreds:
      title: createCloudAccountCreds
      x-stoplight:
        id: azecu6ps02tu0
      type: object
      properties:
        name:
          type: string
          description: Cloud account unique name which is used to identify
        tenantId:
          type: string
          description: azure tenant Id
        applicationId:
          type: string
          description: Azure application Id
        applicationSecret:
          type: string
          description: Azure applicationSecret for the applicationId
        description:
          type: string
          description: Credential description
      required:
        - name
        - tenantId
        - applicationId
        - applicationSecret
      x-examples:
        example-1:
          name: string
          tenantId: string
          applicationId: string
          applicationSecret: string
          description: string
    createMSSQLCreds:
      title: createMSSQLCreds
      x-stoplight:
        id: kudwp6wqa7dne
      type: object
      properties:
        name:
          type: string
        userAccount:
          type: string
        password:
          type: string
        description:
          type: string
      required:
        - name
        - userAccount
        - password
      x-examples:
        example-1:
          name: string
          userAccount: string
          password: string
          description: string
